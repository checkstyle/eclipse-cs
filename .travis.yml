version: ~> 1.0
dist: focal
# this arch is required as is for Partner Queue Solution - DO NOT MODIFY
arch: ppc64le
language: java

cache:
  directories:
    - ~/.m2

addons:
  apt:
    packages:
      - xmlstarlet
      - maven

branches:
  only:
    - master

install: true


# JDKs used in builds must be supported by Tycho.
# Check https://wiki.eclipse.org/Tycho/Release_Notes to find supported versions.
jobs:
  fast_finish: true
  include:
    # JDK 11 (minimal supported Java version of eclipse-cs)
    - jdk: openjdk11
      env:
        - DESC="install (openjdk11)"
        - CMD="./mvnw --errors --no-transfer-progress install"

    # JDK 17 (most recent Java LTS version)
    - jdk: openjdk17
      env:
        - DESC="install (openjdk17)"
        - CMD="./mvnw --errors --no-transfer-progress install"

script:
  - ./.ci/travis.sh init-m2-repo
  - ./.ci/travis.sh run-command "$CMD"
  - ./.ci/validation.sh git-diff
  - sleep 5s

after_success:
